<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reference &mdash; gfe-db 1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Usage" href="usage.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> gfe-db
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#aws-cloud-architecture">AWS Cloud Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#base-infrastructure">Base infrastructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#database">Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-pipeline">Data Pipeline</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">gfe-db</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Reference</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/reference.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="reference">
<h1>Reference<a class="headerlink" href="#reference" title="Permalink to this headline"></a></h1>
<section id="aws-cloud-architecture">
<h2>AWS Cloud Architecture<a class="headerlink" href="#aws-cloud-architecture" title="Permalink to this headline"></a></h2>
<a class="reference internal image-reference" href="_images/arch-v220417.png"><img alt="_images/arch-v220417.png" src="_images/arch-v220417.png" style="width: 635.5px; height: 442.5px;" /></a>
<p><code class="docutils literal notranslate"><span class="pre">gfe-db</span></code> architecture is organized into 3 layers.</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#infrastructure">Base infrastructure</a></p></li>
<li><p><a class="reference internal" href="#database">Database</a></p></li>
<li><p><a class="reference internal" href="#datapipeline">Data Pipeline</a></p></li>
</ol>
<p>This allows deployments to be decoupled using Makefiles. Common
configuration parameters are shared between resources using environment
variables, JSON files, AWS SSM Parameter Store and Secrets Manager.</p>
<section id="base-infrastructure">
<span id="infrastructure"></span><h3>Base infrastructure<a class="headerlink" href="#base-infrastructure" title="Permalink to this headline"></a></h3>
<p>The base infrastructure layer deploys a VPC, public subnet, S3 bucket,
Elastic IP and common SSM parameters and secrets for the other services
to use.</p>
</section>
<section id="database">
<span id="id1"></span><h3>Database<a class="headerlink" href="#database" title="Permalink to this headline"></a></h3>
<p>The database layer deploys an EC2 instance running the Neo4j Community
Edition into a public subnet. During initialization,
Cypher queries are run to create constraints and indexes, which help
speed up loading and ensure data integrity. Neo4j is ready to be
accessed through a browser once the instance has booted sucessfully.</p>
</section>
<section id="data-pipeline">
<span id="datapipeline"></span><h3>Data Pipeline<a class="headerlink" href="#data-pipeline" title="Permalink to this headline"></a></h3>
<p>The data pipeline layer automates integration of newly released IMGT/HLA
data into Neo4j using a scheduled Lambda which watches the source data
repository and invokes the build and load processes when it detects a
new IMGT/HLA version. The pipeline consists of a Step Functions state
machine which orchestrates two basic processes: build and load. The
build process employs a Batch job which produces an intermediate set of
CSV files. The load process leverages SSM Run Command to copy the CSV
files to the Neo4j server and execute Cypher statements directly on the
server (server-side loading). When loading the full dataset of 35,000+
alleles, the build step will generally take around 15 minutes, however
the load step can take an hour or more.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="usage.html" class="btn btn-neutral float-left" title="Usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, National Marrow Donor Program.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>