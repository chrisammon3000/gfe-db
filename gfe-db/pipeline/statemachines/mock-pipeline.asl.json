{
    "StartAt": "BuildRelease",
    "States": {
        "BuildRelease": {
            "Type": "Parallel",
            "Next": "LoadRelease",
            "OutputPath": "$.[1]",
            "Branches": [
                {
                    "StartAt": "UpdateExecutionStateInProgress",
                    "States": {
                        "UpdateExecutionStateInProgress": {
                            "Type": "Task",
                            "Resource": "arn:aws:states:::dynamodb:updateItem",
                            "ResultPath": null,
                            "End": true,
                            "Parameters": {
                                "TableName": "${ExecutionStateTable}",
                                "Key": {
                                    "commit__sha": {
                                        "S.$": "$.commit_sha"
                                    },
                                    "execution__version": {
                                        "N.$": "States.Format('{}', $.version)"
                                    }
                                },
                                "UpdateExpression": "SET execution__status = :status",
                                "ExpressionAttributeValues": {
                                    ":status": {
                                        "S": "IN_PROGRESS"
                                    }
                                }
                            }
                        }
                    }
                },
                {
                    "StartAt": "GfeDbBuildJobMockState",
                    "States": {
                        "GfeDbBuildJobMockState": {
                            "Type": "Task",
                            "Resource": "arn:aws:lambda:us-east-1:531868584498:function:GfeDbBuildJobMockFunction",
                            "ResultPath": "$.s3_path",
                            "End": true
                        }
                    }
                }
            ]
        },
        "LoadRelease": {
            "Type": "Parallel",
            "OutputPath": "$.[1]",
            "End": true,
            "Branches": [
                {
                    "StartAt": "InvokeLoadScript",
                    "States": {
                        "InvokeLoadScript": {
                            "Type": "Pass",
                            "End": true
                        }
                    }
                },
                {
                    "StartAt": "QueueRelease",
                    "States": {
                        "QueueRelease": {
                            "Type": "Task",
                            "Resource": "arn:aws:states:::sqs:sendMessage.waitForTaskToken",
                            "ResultPath": null,
                            "Parameters": {
                                "QueueUrl": "${GfeDbLoadReleaseQueueUrl}",
                                "MessageBody": {
                                    "input.$": "$",
                                    "task_token.$": "$$.Task.Token"
                                }
                            },
                            "End": true
                        }
                    }
                }
            ]
        }
    }
}